@page "/"
@using Data.Knapsack
@using Data
@inject InputService InputService
@inject ImplementationInvokeService Invoker

<h1>Knapsack problem</h1>

<ImplementationPicker />

<InputFilePicker NewValuesRead="@UpdateItems" />

<ImplementationSelector />

<KnapsackStatus />

<AvailableItems Items="@Items" Picked="Picked" />

<input value="Process" type="button" @onclick="@Process" />

@code
{
    private List<KnapsackItem> Items { get; set; }
    private List<bool> Picked { get; set; }

    private void UpdateItems()
    {
        Items = InputService.Input.Items;
    }

    protected override void OnInitialized()
    {
        UpdateItems();
    }

    private void Process()
    {
        Picked = Invoker.InvokeSelected().ToList();
    }
}
